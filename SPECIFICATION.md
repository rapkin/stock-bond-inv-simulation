# Investment Simulation - Специфікація та Інструкція

## Огляд

Скрипт для симуляції довгострокових інвестицій в акції з використанням стратегії Dollar Cost Averaging (DCA). Симулює регулярні покупки кожної другої п'ятниці (день зарплати) та порівнює результати з інвестиціями в короткострокові державні облігації (T-bills).

## Функціональні вимоги

### 1. Завантаження даних

| Тип даних | Джерело | Опис |
|-----------|---------|------|
| Ціни акцій | Yahoo Finance (yfinance) | Щоденні ціни закриття за вказаний період |
| Інфляція (CPI) | FRED API | Consumer Price Index для розрахунку реальних значень |
| Ставки T-bills | FRED API | 3-місячні Treasury Bills для порівняння |

### 2. Логіка симуляції

- **Періодичність покупок**: кожна друга п'ятниця року (≈26 покупок/рік)
- **Сума покупки**: фіксована, задається параметром
- **Розрахунок акцій**: `кількість_акцій = сума_інвестиції / ціна_акції`
- **T-bills**: паралельна симуляція з накопиченням відсотків за щоденною ставкою

### 3. Розрахунки

```
Номінальні значення:
  portfolio_value = shares_owned × current_price
  portfolio_profit = portfolio_value - total_invested
  portfolio_profit_pct = (portfolio_profit / total_invested) × 100

Реальні значення (скориговані на інфляцію):
  inflation_factor = CPI_end / CPI_current
  portfolio_value_real = portfolio_value × inflation_factor
```

### 4. Візуалізації

| # | Графік | Опис |
|---|--------|------|
| 1 | Ціна акції | Історична ціна тікера |
| 2 | Вартість портфеля | Номінальна vs реальна вартість + інвестовано |
| 3 | Прибутки портфеля | Номінальний vs реальний прибуток з зонами прибутку/збитку |
| 4 | Акції vs T-bills | Порівняння вартості портфелів |
| 5 | Реальні прибутки | Порівняння реальних прибутків акцій та T-bills |
| 6 | Дашборд | Зведена панель з 4 графіками |

### 5. Вихідні дані

- PNG файли графіків (6 шт.)
- CSV файл з повними даними симуляції
- Консольний звіт з підсумками

---

## Інструкція по використанню

### Встановлення

```bash
cd stock-bond-inv-simulation
pip install -r requirements.txt
```

### Базовий запуск

```bash
python investment_simulation.py
```

Запустить симуляцію з параметрами за замовчуванням:
- Тікер: S&P 500 (GSPC)
- Період: 2010-2024
- Інвестиція: $500 кожні 2 тижні

### Параметри командного рядка

```
--ticker, -t    Тікер акції або індексу
--start, -s     Початковий рік
--end, -e       Кінцевий рік
--amount, -a    Сума інвестиції в доларах
--output, -o    Базова директорія для результатів
```

### Приклади

```bash
# S&P 500 за останні 15 років, $1000/2 тижні
python investment_simulation.py -t GSPC -s 2010 -e 2024 -a 1000

# Apple з 2015 року
python investment_simulation.py -t AAPL -s 2015 -e 2024 -a 500

# Microsoft з 2000 року (довгострокова перспектива)
python investment_simulation.py -t MSFT -s 2000 -e 2024 -a 250

# Nasdaq з власною папкою для результатів
python investment_simulation.py -t IXIC -s 2015 -e 2024 -o ./my_results
```

### Підтримувані тікери

| Тікер | Опис |
|-------|------|
| GSPC, SPX, SP500 | S&P 500 Index |
| DJI | Dow Jones Industrial Average |
| IXIC | Nasdaq Composite |
| AAPL, MSFT, GOOGL... | Окремі акції компаній |

### Структура результатів

```
simulation_results/
└── GSPC_2010-2024_$500/
    ├── 1_stock_price.png
    ├── 2_portfolio_value.png
    ├── 3_portfolio_profit.png
    ├── 4_stocks_vs_tbills.png
    ├── 5_real_profit_comparison.png
    ├── 6_dashboard.png
    └── simulation_data.csv
```

### Запуск тестів

```bash
# Всі тести
pytest test_investment_simulation.py -v

# Конкретний клас тестів
pytest test_investment_simulation.py::TestSimulateInvestment -v

# З покриттям коду
pytest test_investment_simulation.py --cov=investment_simulation
```

---

## Технічні деталі

### Залежності

| Пакет | Версія | Призначення |
|-------|--------|-------------|
| yfinance | ≥0.2.28 | Завантаження цін акцій |
| pandas | ≥2.0.0 | Обробка даних |
| pandas-datareader | ≥0.10.0 | Завантаження даних FRED |
| numpy | ≥1.24.0 | Числові розрахунки |
| matplotlib | ≥3.7.0 | Візуалізація |
| pytest | ≥7.4.0 | Тестування |

### Обробка помилок

- Якщо FRED API недоступний, використовуються синтетичні дані:
  - CPI: 3% річної інфляції
  - T-bills: 2% річної ставки
- Неторгові дні автоматично замінюються найближчим торговим днем
- Некоректні тікери призводять до зрозумілого повідомлення про помилку

### Обмеження

- Не враховує комісії брокера
- Не враховує податки на прибуток
- Не враховує дивіденди (для індексів типу GSPC)
- Дані інфляції та T-bills доступні тільки для США
